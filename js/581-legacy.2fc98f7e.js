"use strict";(self["webpackChunklin_cms_vvlog"]=self["webpackChunklin_cms_vvlog"]||[]).push([[581],{95581:function(e,t,r){r.r(t),r.d(t,{default:function(){return _}});var n=r(6808),o=r(41441),l=r(59511),i=(0,n._)("i",{slot:"prefix",class:"el-input__icon el-icon-position"},null,-1),a=(0,n._)("i",{slot:"prefix",class:"el-input__icon el-icon-lollipop"},null,-1),s=(0,n._)("i",{slot:"prefix",class:"el-input__icon el-icon-postcard"},null,-1);function u(e,t,r,u,c,d){var f=(0,n.up)("el-step"),m=(0,n.up)("el-steps"),p=(0,n.up)("el-col"),w=(0,n.up)("el-input"),_=(0,n.up)("el-form-item"),v=(0,n.up)("el-button"),b=(0,n.up)("el-form"),x=(0,n.up)("el-alert"),g=(0,n.up)("el-card"),h=(0,n.up)("el-row");return(0,n.wg)(),(0,n.j4)(h,{gutter:24},{default:(0,n.w5)((function(){return[(0,n.Wm)(g,{class:"box-card",style:{padding:"20px 100px 100px 100px",width:"100%"}},{default:(0,n.w5)((function(){return[(0,n.Wm)(p,{span:16,offset:4},{default:(0,n.w5)((function(){return[(0,n.Wm)(m,{active:c.active,style:{"margin-top":"20px"}},{default:(0,n.w5)((function(){return[(0,n.Wm)(f,{title:"找回密码",description:"验证码将会发送至你的注册邮箱"}),(0,n.Wm)(f,{title:"设置新密码",description:"密码长度必须在6~22位之间，包含字符、数字和 _"})]})),_:1},8,["active"])]})),_:1}),(0,n.Wm)(p,{span:12,offset:6},{default:(0,n.w5)((function(){return[(0,n.wy)((0,n.Wm)(b,{"label-position":"top",ref:"form",style:{"margin-top":"60px"},model:c.form,"label-width":"80px"},{default:(0,n.w5)((function(){return[(0,n.Wm)(_,{label:"邮件",prop:"email",rules:[{required:!0,message:"请输入邮件",trigger:"blur"}]},{default:(0,n.w5)((function(){return[(0,n.Wm)(w,{type:"email",modelValue:c.form.email,"onUpdate:modelValue":t[0]||(t[0]=function(e){return c.form.email=e}),"prefix-icon":"position"},null,8,["modelValue"])]})),_:1}),(0,n.Wm)(_,null,{default:(0,n.w5)((function(){return[(0,n.Wm)(v,{type:"primary",onClick:d.onSubmitNext},{default:(0,n.w5)((function(){return[(0,n.Uk)("下一步")]})),_:1},8,["onClick"])]})),_:1})]})),_:1},8,["model"]),[[o.F8,0==c.active]]),(0,n.wy)((0,n.Wm)(b,{"label-position":"top",ref:"formResetPassword",style:{"margin-top":"60px"},model:c.form,"label-width":"80px",rules:c.rules},{default:(0,n.w5)((function(){return[(0,n.Wm)(_,{label:"邮件",prop:"email"},{default:(0,n.w5)((function(){return[(0,n.Wm)(w,{disabled:!0,modelValue:c.form.email,"onUpdate:modelValue":t[1]||(t[1]=function(e){return c.form.email=e}),type:"email"},{default:(0,n.w5)((function(){return[i]})),_:1},8,["modelValue"])]})),_:1}),(0,n.Wm)(_,{label:"验证码",prop:"reset_code"},{default:(0,n.w5)((function(){return[(0,n.Wm)(w,{modelValue:c.form.reset_code,"onUpdate:modelValue":t[2]||(t[2]=function(e){return c.form.reset_code=e}),autocomplete:"off",type:"text",clearable:""},{default:(0,n.w5)((function(){return[a,(0,n.Wm)(v,{slot:"append",type:"primary",plain:"",disabled:c.reset_code.disabled,onClick:d.getNewCode},{default:(0,n.w5)((function(){return[(0,n.Uk)((0,l.zw)(c.reset_code.text),1)]})),_:1},8,["disabled","onClick"])]})),_:1},8,["modelValue"])]})),_:1}),(0,n.Wm)(_,{label:"新密码",prop:"password"},{default:(0,n.w5)((function(){return[(0,n.Wm)(w,{modelValue:c.form.password,"onUpdate:modelValue":t[3]||(t[3]=function(e){return c.form.password=e}),"show-password":"",autocomplete:"off",clearable:""},{default:(0,n.w5)((function(){return[s]})),_:1},8,["modelValue"])]})),_:1}),(0,n.Wm)(_,null,{default:(0,n.w5)((function(){return[(0,n.Wm)(v,{type:"primary",onClick:d.onSubmitResetPassword},{default:(0,n.w5)((function(){return[(0,n.Uk)("重置密码")]})),_:1},8,["onClick"])]})),_:1})]})),_:1},8,["model","rules"]),[[o.F8,1==c.active]]),(0,n.wy)((0,n.Wm)(x,{style:{"margin-top":"100px"},title:"提示",closable:!1,type:"success",description:"您已成功重置密码","show-icon":""},null,512),[[o.F8,2==c.active]])]})),_:1})]})),_:1})]})),_:1})}var c=r(46559),d=r(78955),f=r(43683),m={data:function(){return{active:0,form:{email:"",password_reset_code:"",reset_code:"",password:""},reset_code:{disabled:!1,time:60,text:"重新获取邮件验证码"},rules:{email:[{required:!0,message:"请输入邮件",trigger:"blur"}],password:[{required:!0,message:"请输入新密码",trigger:"blur"}],reset_code:[{required:!0,message:"请输入验证码",trigger:"blur"}]}}},created:function(){},methods:{onSubmitNext:function(){var e=this;this.$refs["form"].validate(function(){var t=(0,d.Z)((0,c.Z)().mark((function t(r){var n;return(0,c.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=8;break}return t.next=3,f.Z.sendPasswordResetCode({email:e.form.email});case 3:n=t.sent,console.log(n),e.form.password_reset_code=n,e.active++>2&&(e.active=0),e.intervalResetCode();case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},onSubmitResetPassword:function(){var e=this;this.$refs["formResetPassword"].validate(function(){var t=(0,d.Z)((0,c.Z)().mark((function t(r){return(0,c.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=5;break}return t.next=3,f.Z.resetPassword(e.form);case 3:e.$notify({title:"提示",message:"修改密码成功",type:"success"}),e.active++>2&&(e.active=0);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},getNewCode:function(){var e=this;return(0,d.Z)((0,c.Z)().mark((function t(){return(0,c.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,f.Z.sendPasswordResetCode({email:e.form.email});case 2:e.form.password_reset_code=t.sent,e.intervalResetCode();case 4:case"end":return t.stop()}}),t)})))()},intervalResetCode:function(){var e=this,t=setInterval((function(){e.reset_code.time--,e.reset_code.text=e.reset_code.time+"秒后中重发",e.reset_code.disabled=!0,e.reset_code.time<=0&&(window.clearInterval(t),e.reset_code.time=60,e.reset_code.text="重新获取邮件验证码",e.reset_code.disabled=!1)}),1e3)}}},p=r(64186);const w=(0,p.Z)(m,[["render",u]]);var _=w}}]);
//# sourceMappingURL=581-legacy.2fc98f7e.js.map