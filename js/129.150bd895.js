"use strict";(self["webpackChunklin_cms_vvlog"]=self["webpackChunklin_cms_vvlog"]||[]).push([[129],{76301:function(t,e,s){s.r(e),s.d(e,{default:function(){return k}});var o=s(6808),n=s(41441),a=s.p+"img/team-name.09ad8d2f.png";const i={class:"login"},r=(0,o._)("div",{class:"team-name hidden-sm-and-down"},[(0,o._)("img",{src:a,alt:"logo"})],-1),l={class:"form-box","element-loading-background":"rgba(0, 0, 0, 0)"},c=(0,o._)("div",{class:"title"},[(0,o._)("h1",{title:"Lin"},"Lin CMS")],-1),m={class:"form-item nickname"},d=(0,o._)("span",{class:"icon account-icon"},null,-1),u={class:"form-item password"},g=(0,o._)("span",{class:"icon secret-icon"},null,-1),h=(0,o._)("button",{class:"submit-btn",type:"submit"},"登录",-1);function p(t,e,s,a,p,f){const w=(0,o.Q2)("loading");return(0,o.wg)(),(0,o.iD)("div",i,[r,(0,o.wy)(((0,o.wg)(),(0,o.iD)("div",l,[c,(0,o._)("form",{class:"login-form",autocomplete:"off",onSubmit:e[2]||(e[2]=(0,n.iM)((t=>p.throttleLogin()),["prevent"]))},[(0,o._)("div",m,[d,(0,o.wy)((0,o._)("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>p.form.username=t),autocomplete:"off",placeholder:"请填写用户名"},null,512),[[n.nr,p.form.username]])]),(0,o._)("div",u,[g,(0,o.wy)((0,o._)("input",{type:"password","onUpdate:modelValue":e[1]||(e[1]=t=>p.form.password=t),autocomplete:"off",placeholder:"请填写用户登录密码"},null,512),[[n.nr,p.form.password]])]),h],32)])),[[w,p.loading]])])}s(87477);var f=s(52194),w=s(18807),_=s(43683),v=s(50071),b={name:"login",data(){return{loading:!1,wait:2e3,throttleLogin:null,form:{username:"root",password:"123456"},headers:{"Google-RecaptchaToken":""}}},methods:{async login(){try{this.loading=!0,await _.Z.getToken(this.form,this.headers),await this.getInformation(),this.$router.push(w.Z.defaultRoute),this.$message.success("登录成功")}catch(t){this.loading=!1,console.error(t)}},async getInformation(){try{const t=await _.Z.getPermissions();this.setUserAndState(t),this.setUserPermissions(t.permissions)}catch(t){console.log(t)}},...(0,f.nv)(["setUserAndState"]),...(0,f.OI)({setUserPermissions:"SET_USER_PERMISSIONS"})},created(){this.throttleLogin=v.Z.throttle(this.login,this.wait)},components:{}},y=s(64186);const S=(0,y.Z)(b,[["render",p]]);var k=S}}]);
//# sourceMappingURL=129.150bd895.js.map