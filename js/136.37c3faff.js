"use strict";(self["webpackChunklin_cms_vvlog"]=self["webpackChunklin_cms_vvlog"]||[]).push([[136],{13136:function(e,l,t){t.r(l),t.d(l,{default:function(){return _}});var a=t(6808),o=t(41441),i=t(59511);const m={class:"container"},d={class:"wrap"};function u(e,l,t,u,n,r){const s=(0,a.up)("el-input"),f=(0,a.up)("el-form-item"),c=(0,a.up)("el-col"),_=(0,a.up)("el-row"),p=(0,a.up)("el-button"),w=(0,a.up)("el-form"),h=(0,a.Q2)("loading");return(0,a.wg)(),(0,a.iD)("div",m,[(0,a._)("div",d,[(0,a.Wm)(_,null,{default:(0,a.w5)((()=>[(0,a.Wm)(c,{lg:24,md:24,sm:24,xs:24},{default:(0,a.w5)((()=>[(0,a.Wm)(w,{rules:n.rules,model:n.form,"status-icon":"",ref:"form","label-width":"120px",onSubmit:l[6]||(l[6]=(0,o.iM)((()=>{}),["prevent"]))},{default:(0,a.w5)((()=>[(0,a.Wm)(_,null,{default:(0,a.w5)((()=>[(0,a.Wm)(c,{lg:12},{default:(0,a.w5)((()=>[(0,a.Wm)(f,{label:"昵称",prop:"nickname"},{default:(0,a.w5)((()=>[(0,a.Wm)(s,{size:"default",modelValue:n.form.nickname,"onUpdate:modelValue":l[0]||(l[0]=e=>n.form.nickname=e),placeholder:"昵称"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),(0,a.Wm)(_,null,{default:(0,a.w5)((()=>[(0,a.Wm)(c,{lg:12},{default:(0,a.w5)((()=>[(0,a.Wm)(f,{label:"职位",prop:"job_title"},{default:(0,a.w5)((()=>[(0,a.Wm)(s,{size:"default",modelValue:n.form.job_title,"onUpdate:modelValue":l[1]||(l[1]=e=>n.form.job_title=e),placeholder:"职位"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),(0,a.Wm)(_,null,{default:(0,a.w5)((()=>[(0,a.Wm)(c,{lg:12},{default:(0,a.w5)((()=>[(0,a.Wm)(f,{label:"公司",prop:"company"},{default:(0,a.w5)((()=>[(0,a.Wm)(s,{size:"default",modelValue:n.form.company,"onUpdate:modelValue":l[2]||(l[2]=e=>n.form.company=e),placeholder:"公司"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),(0,a.Wm)(_,null,{default:(0,a.w5)((()=>[(0,a.Wm)(c,{lg:12},{default:(0,a.w5)((()=>[(0,a.Wm)(f,{label:"个人网站",prop:"blog_address"},{default:(0,a.w5)((()=>[(0,a.Wm)(s,{size:"default",modelValue:n.form.blog_address,"onUpdate:modelValue":l[3]||(l[3]=e=>n.form.blog_address=e),placeholder:"http(s)://您的网站"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),(0,a.Wm)(_,null,{default:(0,a.w5)((()=>[(0,a.Wm)(c,{lg:12},{default:(0,a.w5)((()=>[(0,a.Wm)(f,{label:"个人简介",prop:"introduction"},{default:(0,a.w5)((()=>[(0,a.Wm)(s,{type:"textarea",size:"default",autosize:{minRows:4,maxRows:8},modelValue:n.form.introduction,"onUpdate:modelValue":l[4]||(l[4]=e=>n.form.introduction=e),placeholder:"请填写个人简介"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),(0,a.Wm)(_,null,{default:(0,a.w5)((()=>[(0,a.Wm)(c,{lg:12},{default:(0,a.w5)((()=>[(0,a.Wm)(f,{label:"对话剩余次数",prop:"ai_chat_count"},{default:(0,a.w5)((()=>[(0,a._)("span",null,(0,i.zw)(n.form.ai_chat_count),1)])),_:1})])),_:1})])),_:1}),(0,a.Wm)(_,null,{default:(0,a.w5)((()=>[(0,a.Wm)(c,{lg:12},{default:(0,a.w5)((()=>[(0,a.Wm)(f,{label:"会员到期时间",prop:"vip_expired_time"},{default:(0,a.w5)((()=>[(0,a._)("span",null,(0,i.zw)(e.$filters.filterTimeYmdHms(n.form.vip_expired_time)),1)])),_:1})])),_:1})])),_:1}),(0,a.Wm)(f,{class:"submit"},{default:(0,a.w5)((()=>[(0,a.wy)(((0,a.wg)(),(0,a.j4)(p,{type:"primary",onClick:l[5]||(l[5]=e=>r.confirmEdit("form"))},{default:(0,a.w5)((()=>[(0,a.Uk)("更新基本信息")])),_:1})),[[h,n.loading]])])),_:1})])),_:1},8,["rules","model"])])),_:1})])),_:1})])])}var n=t(43683),r=t(52194),s={name:"Profile",data(){return{form:{nickname:"",introduction:"",blog_address:"",job_title:"",company:"",ai_chat_count:0,vip_expired_time:""},rules:{nickname:[{required:!0,message:"昵称为必填项",trigger:"blur"}]},loading:!1}},async created(){this.form.nickname=this.user.nickname,this.form.introduction=this.user.introduction,this.form.blog_address=this.user.blog_address,await this.getUserByUserId()},computed:{...(0,r.Se)(["user"])},methods:{...(0,r.nv)(["setUserAndState"]),async getUserByUserId(){if(null!=this.user.id){var e=await n.Z.getUserByUserId(this.user.id);this.form.nickname=e.nickname,this.form.job_title=e.job_title,this.form.company=e.company,this.form.ai_chat_count=e.ai_chat_count,this.form.vip_expired_time=e.vip_expired_time}},async confirmEdit(e){this.$refs[e].validate((async e=>{if(e){this.loading=!0;const e=await n.Z.updateProfile(this.form).finally((e=>{this.loading=!1}));0===e.code&&(this.$message.success(`${e.message}`),n.Z.getInformation().then((e=>{this.setUserAndState(e)})))}}))}}},f=t(64186);const c=(0,f.Z)(s,[["render",u],["__scopeId","data-v-3601ec35"]]);var _=c}}]);
//# sourceMappingURL=136.37c3faff.js.map