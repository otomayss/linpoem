"use strict";(self["webpackChunklin_cms_vvlog"]=self["webpackChunklin_cms_vvlog"]||[]).push([[717],{59717:function(e,t,n){n.r(t),n.d(t,{default:function(){return U}});var r=n(6808),a=n(59511),u={class:"custom-pagination"},s=["disabled"],i={class:"pagination-info"},c=["disabled"],o={class:"pagination-info"};function l(e,t,n,l,p,d){return(0,r.wg)(),(0,r.iD)("div",u,[(0,r._)("button",{onClick:t[0]||(t[0]=function(){return d.prevPage&&d.prevPage.apply(d,arguments)}),disabled:1===n.currentPage,class:"pagination-button"},"上一页",8,s),(0,r._)("span",i,"第 "+(0,a.zw)(n.currentPage)+" 页",1),(0,r._)("button",{onClick:t[1]||(t[1]=function(){return d.nextPage&&d.nextPage.apply(d,arguments)}),disabled:n.currentPage===d.totalPages,class:"pagination-button"},"下一页",8,c),(0,r._)("span",o,"共 "+(0,a.zw)(d.totalPages)+" 页",1)])}n(38303);var p={props:{currentPage:{type:Number,required:!0},pageSize:{type:Number,required:!0},totalItems:{type:Number,required:!0}},computed:{totalPages:function(){return Math.ceil(this.totalItems/this.pageSize)}},methods:{prevPage:function(){this.currentPage>1&&this.$emit("update:currentPage",this.currentPage-1)},nextPage:function(){this.currentPage<this.totalPages&&this.$emit("update:currentPage",this.currentPage+1)}}},d=n(64186);const h=(0,d.Z)(p,[["render",l],["__scopeId","data-v-0c864d6e"]]);var f=h,m=n(41441),g=function(e){return(0,r.dD)("data-v-046733bc"),e=e(),(0,r.Cn)(),e},v={class:"container"},w={class:"wrap"},b=g((function(){return(0,r._)("h3",{style:{"font-weight":"bold","font-size":"18px","margin-top":"20px"}},"分享列表：",-1)})),C={style:{"margin-top":"20px"}};function Z(e,t,n,u,s,i){var c=(0,r.up)("el-button"),o=(0,r.up)("el-col"),l=(0,r.up)("el-input"),p=(0,r.up)("el-row"),d=(0,r.up)("el-table-column"),h=(0,r.up)("el-table"),g=f,Z=(0,r.up)("el-form");return(0,r.wg)(),(0,r.iD)("div",v,[(0,r._)("div",w,[(0,r.Wm)(p,null,{default:(0,r.w5)((function(){return[(0,r.Wm)(o,{lg:24,md:24,sm:24,xs:24},{default:(0,r.w5)((function(){return[(0,r.Wm)(Z,{model:s.form,"status-icon":"",ref:"form","label-width":"120px",onSubmit:t[1]||(t[1]=(0,m.iM)((function(){}),["prevent"]))},{default:(0,r.w5)((function(){return[(0,r.Wm)(p,null,{default:(0,r.w5)((function(){return[s.form.shareCode?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(o,{key:0,lg:12},{default:(0,r.w5)((function(){return[(0,r.Wm)(c,{type:"primary",onClick:i.createShareCode},{default:(0,r.w5)((function(){return[(0,r.Uk)("创建分享代码")]})),_:1},8,["onClick"])]})),_:1})),(0,r.Wm)(o,{lg:24},{default:(0,r.w5)((function(){return[(0,r._)("h3",null,"我的分享代码："+(0,a.zw)(s.form.shareCode),1),(0,r.Wm)(p,null,{default:(0,r.w5)((function(){return[(0,r.Wm)(o,{span:16},{default:(0,r.w5)((function(){return[(0,r.Wm)(l,{modelValue:s.bindShareCodeInput,"onUpdate:modelValue":t[0]||(t[0]=function(e){return s.bindShareCodeInput=e}),placeholder:"输入绑定分享代码（绑定成功可获取2次AI次数）",maxlength:"8",disabled:s.isBindCodeAvailable},null,8,["modelValue","disabled"])]})),_:1}),(0,r.Wm)(c,{type:"success",onClick:i.bindShareCode},{default:(0,r.w5)((function(){return[(0,r.Uk)("绑定分享代码")]})),_:1},8,["onClick"])]})),_:1}),b,(0,r.Wm)(h,{data:s.shareList,style:{width:"100%"}},{default:(0,r.w5)((function(){return[(0,r.Wm)(d,{prop:"share_code",label:"分享代码"}),(0,r.Wm)(d,{prop:"share_user_name",label:"分享用户"}),(0,r.Wm)(d,{prop:"create_time",label:"创建时间"})]})),_:1},8,["data"]),(0,r._)("div",C,[(0,r.Wm)(g,{currentPage:s.page_number,pageSize:s.page_size,totalItems:s.count,"onUpdate:currentPage":i.handleCurrentChange},null,8,["currentPage","pageSize","totalItems","onUpdate:currentPage"])])]})),_:1})]})),_:1})]})),_:1},8,["model"])]})),_:1})]})),_:1})])])}var x=n(46559),_=n(78955),k=n(23267),y=n(62524),P=n(26554),S=function(){function e(){(0,k.Z)(this,e)}return(0,y.Z)(e,[{key:"getSettingByKey",value:function(){var e=(0,_.Z)((0,x.Z)().mark((function e(t){var n;return(0,x.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,P.U2)("cms/settings/key/".concat(t));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getSettingByKeys",value:function(){var e=(0,_.Z)((0,x.Z)().mark((function e(t){var n;return(0,x.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,P.U2)("cms/settings/keys",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"setSettingValues",value:function(){var e=(0,_.Z)((0,x.Z)().mark((function e(t){var n;return(0,x.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,P.v_)("cms/settings/set-values",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"createShareCode",value:function(){var e=(0,_.Z)((0,x.Z)().mark((function e(){var t;return(0,x.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,P.U2)("cms/share/createcode");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getCode",value:function(){var e=(0,_.Z)((0,x.Z)().mark((function e(){var t;return(0,x.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,P.U2)("cms/share/getcode");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"queryBindCode",value:function(){var e=(0,_.Z)((0,x.Z)().mark((function e(){var t;return(0,x.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,P.U2)("cms/share/querybindcode");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"bindCode",value:function(){var e=(0,_.Z)((0,x.Z)().mark((function e(t){var n;return(0,x.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,P.U2)("cms/share/bindcode",{ShareCode:t});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getPagedList",value:function(){var e=(0,_.Z)((0,x.Z)().mark((function e(t){var n;return(0,x.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,P.U2)("cms/share/query",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}]),e}(),I=new S,W={name:"ShareSetting",components:{CustomPagination:f},data:function(){return{form:{shareCode:""},bindShareCodeInput:"",shareList:[],loading:!1,page_number:1,page_size:15,count:0,totalPages:0,isBindCodeAvailable:!1}},created:function(){var e=this;return(0,_.Z)((0,x.Z)().mark((function t(){return(0,x.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.loadInitialData();case 2:case"end":return t.stop()}}),t)})))()},methods:{loadInitialData:function(){var e=this;return(0,_.Z)((0,x.Z)().mark((function t(){var n;return(0,x.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getShareCode();case 2:if(!e.form.shareCode){t.next=5;break}return t.next=5,e.fetchShareList();case 5:return t.next=7,I.queryBindCode();case 7:n=t.sent,e.bindShareCodeInput=n;case 9:case"end":return t.stop()}}),t)})))()},fetchShareList:function(){var e=this;return(0,_.Z)((0,x.Z)().mark((function t(){var n;return(0,x.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.form.shareCode){t.next=3;break}return e.$message.warning("请先创建自己的分享代码"),t.abrupt("return");case 3:return e.loading=!0,t.prev=4,t.next=7,I.getPagedList({ShareCode:e.form.shareCode,Count:e.page_size,Page:e.page_number-1});case 7:n=t.sent,e.shareList=n.items,e.count=n.count,e.totalPages=Math.ceil(e.count/e.page_size),e.page_number>e.totalPages&&(e.page_number=e.totalPages),t.next=17;break;case 14:t.prev=14,t.t0=t["catch"](4),e.$message.error("加载分享列表失败，请重试。");case 17:return t.prev=17,e.loading=!1,t.finish(17);case 20:case"end":return t.stop()}}),t,null,[[4,14,17,20]])})))()},createShareCode:function(){var e=this;return(0,_.Z)((0,x.Z)().mark((function t(){return(0,x.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,I.createShareCode();case 2:return e.form.shareCode=t.sent,e.$message.success("创建的分享代码: ".concat(code)),t.next=6,e.loadInitialData();case 6:case"end":return t.stop()}}),t)})))()},getShareCode:function(){var e=this;return(0,_.Z)((0,x.Z)().mark((function t(){var n;return(0,x.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,I.getCode();case 2:n=t.sent,e.form.shareCode=n;case 4:case"end":return t.stop()}}),t)})))()},bindShareCode:function(){var e=this;return(0,_.Z)((0,x.Z)().mark((function t(){var n;return(0,x.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,I.bindCode(e.bindShareCodeInput);case 2:return n=t.sent,e.$message.success(n),t.next=6,e.fetchShareList();case 6:case"end":return t.stop()}}),t)})))()},handleCurrentChange:function(e){this.page_number=e,this.fetchShareList()}}};const z=(0,d.Z)(W,[["render",Z],["__scopeId","data-v-046733bc"]]);var U=z}}]);
//# sourceMappingURL=717-legacy.51268695.js.map