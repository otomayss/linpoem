"use strict";(self["webpackChunklin_cms_vvlog"]=self["webpackChunklin_cms_vvlog"]||[]).push([[136],{13136:function(e,n,t){t.r(n),t.d(n,{default:function(){return g}});var r=t(6808),u=t(41441),l=t(59511),o={class:"container"},a={class:"wrap"};function i(e,n,t,i,c,f){var m=(0,r.up)("el-input"),d=(0,r.up)("el-form-item"),s=(0,r.up)("el-col"),p=(0,r.up)("el-row"),_=(0,r.up)("el-button"),w=(0,r.up)("el-form"),g=(0,r.Q2)("loading");return(0,r.wg)(),(0,r.iD)("div",o,[(0,r._)("div",a,[(0,r.Wm)(p,null,{default:(0,r.w5)((function(){return[(0,r.Wm)(s,{lg:24,md:24,sm:24,xs:24},{default:(0,r.w5)((function(){return[(0,r.Wm)(w,{rules:c.rules,model:c.form,"status-icon":"",ref:"form","label-width":"120px",onSubmit:n[6]||(n[6]=(0,u.iM)((function(){}),["prevent"]))},{default:(0,r.w5)((function(){return[(0,r.Wm)(p,null,{default:(0,r.w5)((function(){return[(0,r.Wm)(s,{lg:12},{default:(0,r.w5)((function(){return[(0,r.Wm)(d,{label:"昵称",prop:"nickname"},{default:(0,r.w5)((function(){return[(0,r.Wm)(m,{size:"default",modelValue:c.form.nickname,"onUpdate:modelValue":n[0]||(n[0]=function(e){return c.form.nickname=e}),placeholder:"昵称"},null,8,["modelValue"])]})),_:1})]})),_:1})]})),_:1}),(0,r.Wm)(p,null,{default:(0,r.w5)((function(){return[(0,r.Wm)(s,{lg:12},{default:(0,r.w5)((function(){return[(0,r.Wm)(d,{label:"职位",prop:"job_title"},{default:(0,r.w5)((function(){return[(0,r.Wm)(m,{size:"default",modelValue:c.form.job_title,"onUpdate:modelValue":n[1]||(n[1]=function(e){return c.form.job_title=e}),placeholder:"职位"},null,8,["modelValue"])]})),_:1})]})),_:1})]})),_:1}),(0,r.Wm)(p,null,{default:(0,r.w5)((function(){return[(0,r.Wm)(s,{lg:12},{default:(0,r.w5)((function(){return[(0,r.Wm)(d,{label:"公司",prop:"company"},{default:(0,r.w5)((function(){return[(0,r.Wm)(m,{size:"default",modelValue:c.form.company,"onUpdate:modelValue":n[2]||(n[2]=function(e){return c.form.company=e}),placeholder:"公司"},null,8,["modelValue"])]})),_:1})]})),_:1})]})),_:1}),(0,r.Wm)(p,null,{default:(0,r.w5)((function(){return[(0,r.Wm)(s,{lg:12},{default:(0,r.w5)((function(){return[(0,r.Wm)(d,{label:"个人网站",prop:"blog_address"},{default:(0,r.w5)((function(){return[(0,r.Wm)(m,{size:"default",modelValue:c.form.blog_address,"onUpdate:modelValue":n[3]||(n[3]=function(e){return c.form.blog_address=e}),placeholder:"http(s)://您的网站"},null,8,["modelValue"])]})),_:1})]})),_:1})]})),_:1}),(0,r.Wm)(p,null,{default:(0,r.w5)((function(){return[(0,r.Wm)(s,{lg:12},{default:(0,r.w5)((function(){return[(0,r.Wm)(d,{label:"个人简介",prop:"introduction"},{default:(0,r.w5)((function(){return[(0,r.Wm)(m,{type:"textarea",size:"default",autosize:{minRows:4,maxRows:8},modelValue:c.form.introduction,"onUpdate:modelValue":n[4]||(n[4]=function(e){return c.form.introduction=e}),placeholder:"请填写个人简介"},null,8,["modelValue"])]})),_:1})]})),_:1})]})),_:1}),(0,r.Wm)(p,null,{default:(0,r.w5)((function(){return[(0,r.Wm)(s,{lg:12},{default:(0,r.w5)((function(){return[(0,r.Wm)(d,{label:"对话剩余次数",prop:"ai_chat_count"},{default:(0,r.w5)((function(){return[(0,r._)("span",null,(0,l.zw)(c.form.ai_chat_count),1)]})),_:1})]})),_:1})]})),_:1}),(0,r.Wm)(p,null,{default:(0,r.w5)((function(){return[(0,r.Wm)(s,{lg:12},{default:(0,r.w5)((function(){return[(0,r.Wm)(d,{label:"会员到期时间",prop:"vip_expired_time"},{default:(0,r.w5)((function(){return[(0,r._)("span",null,(0,l.zw)(e.$filters.filterTimeYmdHms(c.form.vip_expired_time)),1)]})),_:1})]})),_:1})]})),_:1}),(0,r.Wm)(d,{class:"submit"},{default:(0,r.w5)((function(){return[(0,r.wy)(((0,r.wg)(),(0,r.j4)(_,{type:"primary",onClick:n[5]||(n[5]=function(e){return f.confirmEdit("form")})},{default:(0,r.w5)((function(){return[(0,r.Uk)("更新基本信息")]})),_:1})),[[g,c.loading]])]})),_:1})]})),_:1},8,["rules","model"])]})),_:1})]})),_:1})])])}var c=t(99241),f=t(46559),m=t(78955),d=(t(14632),t(43683)),s=t(52194),p={name:"Profile",data:function(){return{form:{nickname:"",introduction:"",blog_address:"",job_title:"",company:"",ai_chat_count:0,vip_expired_time:""},rules:{nickname:[{required:!0,message:"昵称为必填项",trigger:"blur"}]},loading:!1}},created:function(){var e=this;return(0,m.Z)((0,f.Z)().mark((function n(){return(0,f.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.form.nickname=e.user.nickname,e.form.introduction=e.user.introduction,e.form.blog_address=e.user.blog_address,n.next=5,e.getUserByUserId();case 5:case"end":return n.stop()}}),n)})))()},computed:(0,c.Z)({},(0,s.Se)(["user"])),methods:(0,c.Z)((0,c.Z)({},(0,s.nv)(["setUserAndState"])),{},{getUserByUserId:function(){var e=this;return(0,m.Z)((0,f.Z)().mark((function n(){var t;return(0,f.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(null==e.user.id){n.next=9;break}return n.next=3,d.Z.getUserByUserId(e.user.id);case 3:t=n.sent,e.form.nickname=t.nickname,e.form.job_title=t.job_title,e.form.company=t.company,e.form.ai_chat_count=t.ai_chat_count,e.form.vip_expired_time=t.vip_expired_time;case 9:case"end":return n.stop()}}),n)})))()},confirmEdit:function(e){var n=this;return(0,m.Z)((0,f.Z)().mark((function t(){return(0,f.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:n.$refs[e].validate(function(){var e=(0,m.Z)((0,f.Z)().mark((function e(t){var r;return(0,f.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t){e.next=8;break}return n.loading=!0,e.next=4,d.Z.updateProfile(n.form).finally((function(e){n.loading=!1}));case 4:r=e.sent,0===r.code&&(n.$message.success("".concat(r.message)),d.Z.getInformation().then((function(e){n.setUserAndState(e)}))),e.next=8;break;case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})))()}})},_=t(64186);const w=(0,_.Z)(p,[["render",i],["__scopeId","data-v-3601ec35"]]);var g=w}}]);
//# sourceMappingURL=136-legacy.3da87446.js.map