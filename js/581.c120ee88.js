"use strict";(self["webpackChunklin_cms_vvlog"]=self["webpackChunklin_cms_vvlog"]||[]).push([[581],{95581:function(e,t,l){l.r(t),l.d(t,{default:function(){return f}});var s=l(6808),o=l(41441),a=l(59511);const i=(0,s._)("i",{slot:"prefix",class:"el-input__icon el-icon-position"},null,-1),r=(0,s._)("i",{slot:"prefix",class:"el-input__icon el-icon-lollipop"},null,-1),d=(0,s._)("i",{slot:"prefix",class:"el-input__icon el-icon-postcard"},null,-1);function m(e,t,l,m,p,u){const c=(0,s.up)("el-step"),n=(0,s.up)("el-steps"),f=(0,s.up)("el-col"),w=(0,s.up)("el-input"),_=(0,s.up)("el-form-item"),h=(0,s.up)("el-button"),b=(0,s.up)("el-form"),v=(0,s.up)("el-alert"),g=(0,s.up)("el-card"),y=(0,s.up)("el-row");return(0,s.wg)(),(0,s.j4)(y,{gutter:24},{default:(0,s.w5)((()=>[(0,s.Wm)(g,{class:"box-card",style:{padding:"20px 100px 100px 100px",width:"100%"}},{default:(0,s.w5)((()=>[(0,s.Wm)(f,{span:16,offset:4},{default:(0,s.w5)((()=>[(0,s.Wm)(n,{active:p.active,style:{"margin-top":"20px"}},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{title:"找回密码",description:"验证码将会发送至你的注册邮箱"}),(0,s.Wm)(c,{title:"设置新密码",description:"密码长度必须在6~22位之间，包含字符、数字和 _"})])),_:1},8,["active"])])),_:1}),(0,s.Wm)(f,{span:12,offset:6},{default:(0,s.w5)((()=>[(0,s.wy)((0,s.Wm)(b,{"label-position":"top",ref:"form",style:{"margin-top":"60px"},model:p.form,"label-width":"80px"},{default:(0,s.w5)((()=>[(0,s.Wm)(_,{label:"邮件",prop:"email",rules:[{required:!0,message:"请输入邮件",trigger:"blur"}]},{default:(0,s.w5)((()=>[(0,s.Wm)(w,{type:"email",modelValue:p.form.email,"onUpdate:modelValue":t[0]||(t[0]=e=>p.form.email=e),"prefix-icon":"position"},null,8,["modelValue"])])),_:1}),(0,s.Wm)(_,null,{default:(0,s.w5)((()=>[(0,s.Wm)(h,{type:"primary",onClick:u.onSubmitNext},{default:(0,s.w5)((()=>[(0,s.Uk)("下一步")])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model"]),[[o.F8,0==p.active]]),(0,s.wy)((0,s.Wm)(b,{"label-position":"top",ref:"formResetPassword",style:{"margin-top":"60px"},model:p.form,"label-width":"80px",rules:p.rules},{default:(0,s.w5)((()=>[(0,s.Wm)(_,{label:"邮件",prop:"email"},{default:(0,s.w5)((()=>[(0,s.Wm)(w,{disabled:!0,modelValue:p.form.email,"onUpdate:modelValue":t[1]||(t[1]=e=>p.form.email=e),type:"email"},{default:(0,s.w5)((()=>[i])),_:1},8,["modelValue"])])),_:1}),(0,s.Wm)(_,{label:"验证码",prop:"reset_code"},{default:(0,s.w5)((()=>[(0,s.Wm)(w,{modelValue:p.form.reset_code,"onUpdate:modelValue":t[2]||(t[2]=e=>p.form.reset_code=e),autocomplete:"off",type:"text",clearable:""},{default:(0,s.w5)((()=>[r,(0,s.Wm)(h,{slot:"append",type:"primary",plain:"",disabled:p.reset_code.disabled,onClick:u.getNewCode},{default:(0,s.w5)((()=>[(0,s.Uk)((0,a.zw)(p.reset_code.text),1)])),_:1},8,["disabled","onClick"])])),_:1},8,["modelValue"])])),_:1}),(0,s.Wm)(_,{label:"新密码",prop:"password"},{default:(0,s.w5)((()=>[(0,s.Wm)(w,{modelValue:p.form.password,"onUpdate:modelValue":t[3]||(t[3]=e=>p.form.password=e),"show-password":"",autocomplete:"off",clearable:""},{default:(0,s.w5)((()=>[d])),_:1},8,["modelValue"])])),_:1}),(0,s.Wm)(_,null,{default:(0,s.w5)((()=>[(0,s.Wm)(h,{type:"primary",onClick:u.onSubmitResetPassword},{default:(0,s.w5)((()=>[(0,s.Uk)("重置密码")])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model","rules"]),[[o.F8,1==p.active]]),(0,s.wy)((0,s.Wm)(v,{style:{"margin-top":"100px"},title:"提示",closable:!1,type:"success",description:"您已成功重置密码","show-icon":""},null,512),[[o.F8,2==p.active]])])),_:1})])),_:1})])),_:1})}var p=l(43683),u={data(){return{active:0,form:{email:"",password_reset_code:"",reset_code:"",password:""},reset_code:{disabled:!1,time:60,text:"重新获取邮件验证码"},rules:{email:[{required:!0,message:"请输入邮件",trigger:"blur"}],password:[{required:!0,message:"请输入新密码",trigger:"blur"}],reset_code:[{required:!0,message:"请输入验证码",trigger:"blur"}]}}},created(){},methods:{onSubmitNext(){this.$refs["form"].validate((async e=>{if(e){var t=await p.Z.sendPasswordResetCode({email:this.form.email});console.log(t),this.form.password_reset_code=t,this.active++>2&&(this.active=0),this.intervalResetCode()}}))},onSubmitResetPassword(){this.$refs["formResetPassword"].validate((async e=>{e&&(await p.Z.resetPassword(this.form),this.$notify({title:"提示",message:"修改密码成功",type:"success"}),this.active++>2&&(this.active=0))}))},async getNewCode(){this.form.password_reset_code=await p.Z.sendPasswordResetCode({email:this.form.email}),this.intervalResetCode()},intervalResetCode(){let e=setInterval((()=>{this.reset_code.time--,this.reset_code.text=this.reset_code.time+"秒后中重发",this.reset_code.disabled=!0,this.reset_code.time<=0&&(window.clearInterval(e),this.reset_code.time=60,this.reset_code.text="重新获取邮件验证码",this.reset_code.disabled=!1)}),1e3)}}},c=l(64186);const n=(0,c.Z)(u,[["render",m]]);var f=n}}]);
//# sourceMappingURL=581.c120ee88.js.map