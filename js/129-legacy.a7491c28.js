"use strict";(self["webpackChunklin_cms_vvlog"]=self["webpackChunklin_cms_vvlog"]||[]).push([[129],{76301:function(e,n,t){t.r(n),t.d(n,{default:function(){return y}});var o=t(6808),r=t(41441),s=t.p+"img/team-name.09ad8d2f.png",a={class:"login"},i=(0,o._)("div",{class:"team-name hidden-sm-and-down"},[(0,o._)("img",{src:s,alt:"logo"})],-1),c={class:"form-box","element-loading-background":"rgba(0, 0, 0, 0)"},l=(0,o._)("div",{class:"title"},[(0,o._)("h1",{title:"Lin"},"Lin CMS")],-1),u={class:"form-item nickname"},m=(0,o._)("span",{class:"icon account-icon"},null,-1),d={class:"form-item password"},p=(0,o._)("span",{class:"icon secret-icon"},null,-1),f=(0,o._)("button",{class:"submit-btn",type:"submit"},"登录",-1);function g(e,n,t,s,g,h){var v=(0,o.Q2)("loading");return(0,o.wg)(),(0,o.iD)("div",a,[i,(0,o.wy)(((0,o.wg)(),(0,o.iD)("div",c,[l,(0,o._)("form",{class:"login-form",autocomplete:"off",onSubmit:n[2]||(n[2]=(0,r.iM)((function(e){return g.throttleLogin()}),["prevent"]))},[(0,o._)("div",u,[m,(0,o.wy)((0,o._)("input",{type:"text","onUpdate:modelValue":n[0]||(n[0]=function(e){return g.form.username=e}),autocomplete:"off",placeholder:"请填写用户名"},null,512),[[r.nr,g.form.username]])]),(0,o._)("div",d,[p,(0,o.wy)((0,o._)("input",{type:"password","onUpdate:modelValue":n[1]||(n[1]=function(e){return g.form.password=e}),autocomplete:"off",placeholder:"请填写用户登录密码"},null,512),[[r.nr,g.form.password]])]),f],32)])),[[v,g.loading]])])}var h=t(46559),v=t(78955),w=t(99241),_=(t(87477),t(52194)),Z=t(18807),b=t(43683),k=t(50071),x={name:"login",data:function(){return{loading:!1,wait:2e3,throttleLogin:null,form:{username:"root",password:"123456"},headers:{"Google-RecaptchaToken":""}}},methods:(0,w.Z)((0,w.Z)({login:function(){var e=this;return(0,v.Z)((0,h.Z)().mark((function n(){return(0,h.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,e.loading=!0,n.next=4,b.Z.getToken(e.form,e.headers);case 4:return n.next=6,e.getInformation();case 6:e.$router.push(Z.Z.defaultRoute),e.$message.success("登录成功"),n.next=14;break;case 10:n.prev=10,n.t0=n["catch"](0),e.loading=!1,console.error(n.t0);case 14:case"end":return n.stop()}}),n,null,[[0,10]])})))()},getInformation:function(){var e=this;return(0,v.Z)((0,h.Z)().mark((function n(){var t;return(0,h.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,b.Z.getPermissions();case 3:t=n.sent,e.setUserAndState(t),e.setUserPermissions(t.permissions),n.next=11;break;case 8:n.prev=8,n.t0=n["catch"](0),console.log(n.t0);case 11:case"end":return n.stop()}}),n,null,[[0,8]])})))()}},(0,_.nv)(["setUserAndState"])),(0,_.OI)({setUserPermissions:"SET_USER_PERMISSIONS"})),created:function(){this.throttleLogin=k.Z.throttle(this.login,this.wait)},components:{}},S=t(64186);const U=(0,S.Z)(x,[["render",g]]);var y=U}}]);
//# sourceMappingURL=129-legacy.a7491c28.js.map